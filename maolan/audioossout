/* vim: set syntax=cpp: */
#pragma once
#include <string>
#include <maolan/audioio>
#include <maolan/audioinput>


class AudioOSSOut : public AudioIO
{
  public:
    AudioOSSOut(const std::size_t &channels);
    ~AudioOSSOut();

    void sync() const;
    void connect(AudioIO *to);
    void connect(AudioIO *to, std::size_t inCh, std::size_t outCh);
    void fetch();
    void process();
    std::size_t channels() const;
    void play(int *rawData, std::size_t dataSize);

  protected:
    int fd;
    int samplerate;
    int format;
    int frag;
    int fragsize;
    std::vector<AudioInput> inputs;
    std::vector<int> normalizedOut;
};
